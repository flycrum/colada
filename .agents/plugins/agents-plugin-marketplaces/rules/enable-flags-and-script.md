# ENABLE_LOCAL_AGENT_CLAUDE / ENABLE_LOCAL_AGENT_CURSOR

- **Git post-merge hook** (in [.githooks/post-merge](../../../.githooks/post-merge)) runs `scripts/sync-claude-marketplace.js` after a successful **git pull** (when pull merges). Enable once per clone: **`pnpm run setup:githooks`** (sets `core.hooksPath` to `.githooks`). Script reads `ENABLE_LOCAL_AGENT_CLAUDE` (default false) from `.envrc.local` / `.env`. If you only changed `.envrc.local` and havenâ€™t pulled, run **`pnpm run sync:claude-marketplace`** once. Manual test: [commands/manual-test-pnpm-install-sync.md](../commands/manual-test-pnpm-install-sync.md) (doc still references pnpm for comparison; sync is now triggered by post-merge).
- When `true`: create or surgically update `.claude-plugin/marketplace.json` and `.claude/settings.json` (only our keys); when `false`: surgically remove those same fields (clean slate)
- Four combos: true/true, true/false, false/true, false/false; Cursor has no script, flag is documented for future use
- Define in **.envrc.local** (copy from root [.env.example](../../../.env.example); gitignored, each dev owns it) or `.env`; root [.envrc](../../../.envrc) runs `source_env_if_exists .envrc.local` so local exports load. See [.agents/plugins/env-variables](../../env-variables) rules/where-to-define.md
