# .envrc and .env.example

## Purpose

Colocated context for root [.envrc](.envrc), [.env](.env), and [.env.example](.env.example). [.envrc](.envrc) is the direnv entrypoint. Repo commits a default [.env](.env) with safe values; per-developer overrides go in gitignored `.envrc.local`. [.env.example](.env.example) is the template for `.envrc.local`.

## Requirements

- Do not commit `.envrc.local` (or `.env*.local`); they are in [.gitignore](.gitignore)
- Prefer directing developers to copy [.env.example](.env.example) to **.envrc.local** for overrides; [.envrc](.envrc) loads it via `source_env_if_exists .envrc.local`
- When editing [.envrc](.envrc), [.env](.env), or [.env.example](.env.example), keep [.agents/plugins/env-variables](.agents/plugins/env-variables) rules in sync (variables, where-to-define, conventions)

## What is direnv

[direnv](https://direnv.net/) loads environment variables when you `cd` into a directory that has a `.envrc` file. It runs the contents of `.envrc` in a subshell and exports the resulting env for that directory tree. Install: `brew install direnv` (or your package manager); then hook it into your shell (e.g. add `eval "$(direnv hook zsh)"` to `~/.zshrc` and run `direnv allow` in the repo root once so the project’s `.envrc` is trusted).

## What .envrc does

- **`dotenv`** — direnv stdlib; loads committed [.env](.env) (KEY=value) and exports variables. Loaded first as base/default.
- **`source_env_if_exists .envrc.local`** — If `.envrc.local` exists at repo root, direnv runs it as a script (e.g. `export ENABLE_LOCAL_AGENT_CLAUDE=true`). Loaded second so it **overrides** `.env` for the same keys. Copy [.env.example](.env.example) to `.envrc.local` for overrides; do not commit `.envrc.local`.

**Load order:** `.env` then `.envrc.local`. So **.envrc.local overrides .env**; same key in both = value from `.envrc.local` wins.

## What .env and .env.example are for

- **[.env](.env)** — Committed default (safe values). Loaded by `dotenv`; do not put secrets here.
- **[.env.example](.env.example)** — Template for **.envrc.local** (gitignored overrides). Uses `export KEY=value` so it is valid when sourced. Variables and semantics: see [.agents/plugins/env-variables/rules/variables.md](.agents/plugins/env-variables/rules/variables.md) and [where-to-define.md](.agents/plugins/env-variables/rules/where-to-define.md).
