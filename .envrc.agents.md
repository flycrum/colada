# .envrc and .env.example

## Purpose

Colocated context for root [.envrc](.envrc) and [.env.example](.env.example). These files support per-developer local env (e.g. `ENABLE_LOCAL_AGENT_CLAUDE`) without committing secrets or personal choices. [.envrc](.envrc) is the direnv entrypoint; [.env.example](.env.example) is the template developers copy into a gitignored file.

## Requirements

- Do not commit `.envrc.local` or `.env`; they are in [.gitignore](.gitignore)
- Prefer directing developers to copy [.env.example](.env.example) to **.envrc.local** so [.envrc](.envrc) can load it via `source_env_if_exists .envrc.local`
- When editing [.envrc](.envrc) or [.env.example](.env.example), keep [.agents/plugins/env-variables](.agents/plugins/env-variables) rules in sync (variables, where-to-define, conventions)

## What is direnv

[direnv](https://direnv.net/) loads environment variables when you `cd` into a directory that has a `.envrc` file. It runs the contents of `.envrc` in a subshell and exports the resulting env for that directory tree. Install: `brew install direnv` (or your package manager); then hook it into your shell (e.g. add `eval "$(direnv hook zsh)"` to `~/.zshrc` and run `direnv allow` in the repo root once so the project’s `.envrc` is trusted).

## What .envrc does

- **`dotenv`** — direnv stdlib; loads `.env` (KEY=value) from the current directory and exports variables. Loaded first so it acts as base/default.
- **`source_env_if_exists .envrc.local`** — If `.envrc.local` exists at repo root, direnv runs it as a script (e.g. `export ENABLE_LOCAL_AGENT_CLAUDE=true`). Loaded second so it **overrides** `.env` for the same keys. Each developer copies [.env.example](.env.example) to `.envrc.local`, edits it, and never commits it.

**Load order:** `.env` then `.envrc.local`. So **.envrc.local overrides .env** (local overrides base); same key in both = value from `.envrc.local` wins.

## What .env.example is for

Template for local config. Developers copy it to **.envrc.local** (recommended) or to **.env**. It uses `export KEY=value` so it is valid for `.envrc.local` (sourced as a shell script). Variables and semantics: see [.agents/plugins/env-variables/rules/variables.md](.agents/plugins/env-variables/rules/variables.md) and [where-to-define.md](.agents/plugins/env-variables/rules/where-to-define.md).
